/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package shakemon;

import io.javalin.Javalin;
import shakemon.api.HttpHandlers;
import shakemon.pokemon.PokemonDescriptions;
import shakemon.translation.Translate;

public class Main {
    private final Config config;

    public Main(Config config) {
        this.config = config;
    }

    public static void main(String[] args) {
        new Main(Config.load()).run();
    }

    public void run() {
        var app = Javalin.create().start(config.port());
        var handlers = new HttpHandlers(dependencies());
        handlers.register(app);
    }

    private TranslatePokemonDescription dependencies() {
        return new TranslatePokemonDescription(
                PokemonDescriptions.Fake.alwaysReturning("best pokemon"),
                Translate.Fake.prependingToDescription("Pretend it is Shakesperean: "));
    }

}
